(function(e){e.fn.repeatable=function(t){var n={addTrigger:null,max:null,startWith:0,template:null,triggerEvent:"click",onAdd:function(){},onDelete:function(){}},r=0,i=e(this),s=e.extend({},n,t),o=function(){return e(i).find(".repeatable").length}(),u=function(){f();s.onAdd.call(this)},a=function(){e(this).parents(".repeatable").first().remove();o--;c();s.onDelete.call(this)},f=function(){l().appendTo(i);o++;c()},l=function(){var t=e(s.template).html();t=t.replace(/{\?}/g,"new"+r++);t=t.replace(/\{[^\?\}]*\}/g,"");return e(t)},c=function(){if(!s.max)return;o===s.max?e(s.addTrigger).attr("disabled","disabled"):o<s.max&&e(s.addTrigger).removeAttr("disabled")};(function(){e(s.addTrigger).on(s.triggerEvent,u);e("form").on(s.triggerEvent,".delete",a);var t=s.startWith-o;for(var n=0;n<t;n++)f()})()}})(jQuery);